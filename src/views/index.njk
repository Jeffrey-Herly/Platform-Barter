<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <title>Test Webix (Hard-coded)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Webix CDN -->
  <script src="https://cdn.webix.com/edge/webix.js"></script>
  <link rel="stylesheet" href="https://cdn.webix.com/edge/webix.css" />

  <style>
    html, body { height:100%; margin:0; }
    #webix-container { height:100%; }
    .footer { text-align:center; line-height:40px; }
  </style>
</head>
<body>
  <div id="webix-container"></div>

  <script>
    webix.ready(function () {
      // data hard-coded (bisa langsung diedit di grid, tidak disimpan ke mana-mana)
      const dataRows = [
        { id:1, name:"John Doe",  age:30, email:"john@example.com",  role:"Admin" },
        { id:2, name:"Jane Smith",age:25, email:"jane@example.com",  role:"Editor" },
        { id:3, name:"Sam Johnson",age:35, email:"sam@example.com",  role:"Viewer" },
        { id:4, name:"Alice Lee",  age:28, email:"alice@example.com", role:"Editor" }
      ];

      webix.ui({
        container: "webix-container",
        rows: [
          // Toolbar
          { view:"toolbar", padding:{ left:8, right:8 }, elements:[
            { view:"label", label:"Webix Hard-coded Demo" },
            {},
            { view:"button", value:"Tambah Baris", width:130, click(){
                const grid = $$("tbl");
                grid.add({ id:webix.uid(), name:"(baru)", age:18, email:"-", role:"Viewer" }, 0);
              }
            },
            { width:8 },
            { view:"button", value:"Reset Data", width:120, click(){
                const grid = $$("tbl");
                grid.clearAll();
                grid.parse(dataRows);
                webix.message("Data di-reset");
              }
            }
          ]},

          // Filter cepat
          { padding:{ x:8, y:6 }, cols:[
            { view:"text", id:"q", placeholder:"Cari nama/email…", on:{
                onTimedKeyPress(){
                  const v = this.getValue().toLowerCase();
                  $$("tbl").filter(function(obj){
                    return obj.name.toLowerCase().includes(v) ||
                           obj.email.toLowerCase().includes(v);
                  });
                }
              }
            },
            { width:8 },
            { view:"button", value:"Bersihkan Filter", width:150, click(){
                $$("q").setValue("");
                $$("tbl").filter(); // hapus filter
              }
            }
          ]},

          // Datatable
          { view:"datatable", id:"tbl",
            select:"row",
            resizeColumn:true,
            editable:true,
            editaction:"dblclick",
            columns:[
              { id:"id",    header:"#",     width:60, sort:"int" },
              { id:"name",  header:"Nama",  fillspace:true, editor:"text", sort:"string" },
              { id:"age",   header:"Usia",  width:80,  editor:"text", sort:"int" },
              { id:"email", header:"Email", fillspace:true, editor:"text", sort:"string" },
              { id:"role",  header:"Role",  width:120, editor:"select",
                options:["Admin","Editor","Viewer"], sort:"string" }
            ],
            on:{
              onBeforeLoad(){ this.showOverlay("Loading…"); },
              onAfterLoad(){ this.hideOverlay(); }
            },
            data: dataRows
          },

          // Footer
          { view:"template", template:"© 2025 — Hard-coded Webix Test", height:40, css:"footer" }
        ]
      });
    });
  </script>
</body>
</html>
